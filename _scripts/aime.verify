#!/bin/bash
set -e

echo "🔍 Verifying repository structure..."

# Check if all required directories exist
REQUIRED_DIRS=(
  "_docs/design"
  "_docs/guides" 
  "_scripts"
  "apps/eatgpt"
  "services/aimeup-service"
  "packages/core"
  "packages/helpers"
  "packages/core-react"
  "packages/ui-native"
  "packages/chat"
  "packages/account"
  "packages/eatgpt/nutrition"
  "packages/eatgpt/healthconnect"
  "packages/tokens"
  "configs"
)

for dir in "${REQUIRED_DIRS[@]}"; do
  if [ ! -d "$dir" ]; then
    echo "❌ Missing required directory: $dir"
    exit 1
  fi
done

# Check if package.json files exist for key packages
REQUIRED_PACKAGES=(
  "package.json"
  "apps/eatgpt/package.json"
  "packages/core/package.json"
  "packages/helpers/package.json"
)

for pkg in "${REQUIRED_PACKAGES[@]}"; do
  if [ ! -f "$pkg" ]; then
    echo "❌ Missing package.json: $pkg"
    exit 1
  fi
done

echo "✅ Repository structure verification passed!"
echo ""
echo "📖 Guide: https://github.com/yourorg/aimeup/blob/main/_docs/guides/environment-setup.md"
echo "🔧 Build: pnpm run build"
echo "🧪 Test: pnpm run check"